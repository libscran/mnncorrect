<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>mnncorrect: mnncorrect::Options&lt; Dim_, Index_, Float_ &gt; Struct Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">mnncorrect
   </div>
   <div id="projectbrief">Batch correction with mutual nearest neighbors</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacemnncorrect.html">mnncorrect</a></li><li class="navelem"><a class="el" href="structmnncorrect_1_1Options.html">Options</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="structmnncorrect_1_1Options-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">mnncorrect::Options&lt; Dim_, Index_, Float_ &gt; Struct Template Reference</div></div>
</div><!--header-->
<div class="contents">

<p><a class="el" href="structmnncorrect_1_1Options.html" title="Options for compute().">Options</a> for <code><a class="el" href="namespacemnncorrect.html#af638206e33439818ce2f04633fcd9bb5">compute()</a></code>.  
 <a href="structmnncorrect_1_1Options.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="Options_8hpp_source.html">Options.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a77a06b63da4627528962cdb62f90ca28" id="r_a77a06b63da4627528962cdb62f90ca28"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmnncorrect_1_1Options.html#a77a06b63da4627528962cdb62f90ca28">num_neighbors</a> = 15</td></tr>
<tr class="separator:a77a06b63da4627528962cdb62f90ca28"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4285057efa41bf177dc941e9bdba2cef" id="r_a4285057efa41bf177dc941e9bdba2cef"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmnncorrect_1_1Options.html#a4285057efa41bf177dc941e9bdba2cef">num_mads</a> = 3</td></tr>
<tr class="separator:a4285057efa41bf177dc941e9bdba2cef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4e93734e03009bcaec7e43b09605421" id="r_ab4e93734e03009bcaec7e43b09605421"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="elRef" href="https://knncolle.github.io/knncolle/classknncolle_1_1Builder.html">knncolle::Builder</a>&lt; <a class="elRef" href="https://knncolle.github.io/knncolle/classknncolle_1_1SimpleMatrix.html">knncolle::SimpleMatrix</a>&lt; Dim_, Index_, Float_ &gt;, Float_ &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmnncorrect_1_1Options.html#ab4e93734e03009bcaec7e43b09605421">builder</a></td></tr>
<tr class="separator:ab4e93734e03009bcaec7e43b09605421"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f2a7eb9a24cb5b0df223414b7ec7146" id="r_a2f2a7eb9a24cb5b0df223414b7ec7146"><td class="memItemLeft" align="right" valign="top">std::vector&lt; size_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmnncorrect_1_1Options.html#a2f2a7eb9a24cb5b0df223414b7ec7146">order</a></td></tr>
<tr class="separator:a2f2a7eb9a24cb5b0df223414b7ec7146"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb9f44245d56eb231b87f76412505dbf" id="r_adb9f44245d56eb231b87f76412505dbf"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmnncorrect_1_1Options.html#adb9f44245d56eb231b87f76412505dbf">automatic_order</a> = true</td></tr>
<tr class="separator:adb9f44245d56eb231b87f76412505dbf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6230f843c36e15e45007376508ef12f" id="r_af6230f843c36e15e45007376508ef12f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmnncorrect_1_1Options.html#af6230f843c36e15e45007376508ef12f">robust_iterations</a> = 2</td></tr>
<tr class="separator:af6230f843c36e15e45007376508ef12f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33d8e8a5102579ce703156509f09b72c" id="r_a33d8e8a5102579ce703156509f09b72c"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmnncorrect_1_1Options.html#a33d8e8a5102579ce703156509f09b72c">robust_trim</a> = 0.25</td></tr>
<tr class="separator:a33d8e8a5102579ce703156509f09b72c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6bdc7f31d9b5a2a9aad0862677b5c829" id="r_a6bdc7f31d9b5a2a9aad0862677b5c829"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemnncorrect.html#a628f306b43e4b2a96382aa7025940694">ReferencePolicy</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmnncorrect_1_1Options.html#a6bdc7f31d9b5a2a9aad0862677b5c829">reference_policy</a> = ReferencePolicy::MAX_RSS</td></tr>
<tr class="separator:a6bdc7f31d9b5a2a9aad0862677b5c829"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbbbae91bfc491a2aaa9f3b2b27b8b49" id="r_abbbbae91bfc491a2aaa9f3b2b27b8b49"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmnncorrect_1_1Options.html#abbbbae91bfc491a2aaa9f3b2b27b8b49">mass_cap</a> = -1</td></tr>
<tr class="separator:abbbbae91bfc491a2aaa9f3b2b27b8b49"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25c060852ae2b7402ba5b5d7e46338ba" id="r_a25c060852ae2b7402ba5b5d7e46338ba"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmnncorrect_1_1Options.html#a25c060852ae2b7402ba5b5d7e46338ba">num_threads</a> = 1</td></tr>
<tr class="separator:a25c060852ae2b7402ba5b5d7e46338ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><div class="compoundTemplParams">template&lt;typename Dim_ = int, typename Index_ = int, typename Float_ = double&gt;<br />
struct mnncorrect::Options&lt; Dim_, Index_, Float_ &gt;</div><p><a class="el" href="structmnncorrect_1_1Options.html" title="Options for compute().">Options</a> for <code><a class="el" href="namespacemnncorrect.html#af638206e33439818ce2f04633fcd9bb5">compute()</a></code>. </p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">Dim_</td><td>Integer type for the dimensions of the neighbor search. </td></tr>
    <tr><td class="paramname">Index_</td><td>Integer type for the observation index of the neighbor search. </td></tr>
    <tr><td class="paramname">Float_</td><td>Floating-point type for the distances in the neighbor search. </td></tr>
  </table>
  </dd>
</dl>
</div><h2 class="groupheader">Member Data Documentation</h2>
<a id="adb9f44245d56eb231b87f76412505dbf" name="adb9f44245d56eb231b87f76412505dbf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb9f44245d56eb231b87f76412505dbf">&#9670;&#160;</a></span>automatic_order</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Dim_  = int, typename Index_  = int, typename Float_  = double&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="structmnncorrect_1_1Options.html">mnncorrect::Options</a>&lt; Dim_, Index_, Float_ &gt;::automatic_order = true</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Should batches be merged in an automatically-determined order?</p>
<p>If <code>true</code> and <code><a class="el" href="structmnncorrect_1_1Options.html#a2f2a7eb9a24cb5b0df223414b7ec7146">Options::order</a></code> is empty, the largest batch is used as the reference and other batches are successively merged onto it. At each merge step, we choose the batch that forms the largest number of MNNs with the current reference, and the merged dataset is defined as the new reference.</p>
<p>If this is empty and <code><a class="el" href="structmnncorrect_1_1Options.html#adb9f44245d56eb231b87f76412505dbf">Options::automatic_order</a> = false</code>, batches are merged in the order that they were supplied in <code><a class="el" href="namespacemnncorrect.html#af638206e33439818ce2f04633fcd9bb5">compute()</a></code>. If a <code>batch</code> array was supplied, the batches are merged in order of their identifiers, i.e., batch 0 is the reference.</p>
<p>If <code><a class="el" href="structmnncorrect_1_1Options.html#a2f2a7eb9a24cb5b0df223414b7ec7146">Options::order</a></code> is non-empty, this setting is ignored and the manually specified order is always used. </p>

</div>
</div>
<a id="ab4e93734e03009bcaec7e43b09605421" name="ab4e93734e03009bcaec7e43b09605421"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab4e93734e03009bcaec7e43b09605421">&#9670;&#160;</a></span>builder</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Dim_  = int, typename Index_  = int, typename Float_  = double&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt;<a class="elRef" href="https://knncolle.github.io/knncolle/classknncolle_1_1Builder.html">knncolle::Builder</a>&lt;<a class="elRef" href="https://knncolle.github.io/knncolle/classknncolle_1_1SimpleMatrix.html">knncolle::SimpleMatrix</a>&lt;Dim_, Index_, Float_&gt;, Float_&gt; &gt; <a class="el" href="structmnncorrect_1_1Options.html">mnncorrect::Options</a>&lt; Dim_, Index_, Float_ &gt;::builder</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Algorithm to use for building the nearest-neighbor search indices. If NULL, defaults to an exact search via <code><a class="elRef" href="https://knncolle.github.io/knncolle/classknncolle_1_1VptreeBuilder.html">knncolle::VptreeBuilder</a></code> with Euclidean distances. </p>

</div>
</div>
<a id="abbbbae91bfc491a2aaa9f3b2b27b8b49" name="abbbbae91bfc491a2aaa9f3b2b27b8b49"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abbbbae91bfc491a2aaa9f3b2b27b8b49">&#9670;&#160;</a></span>mass_cap</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Dim_  = int, typename Index_  = int, typename Float_  = double&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">size_t <a class="el" href="structmnncorrect_1_1Options.html">mnncorrect::Options</a>&lt; Dim_, Index_, Float_ &gt;::mass_cap = -1</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Cap on the number of observations used to compute the center of mass for each MNN-involved observation in the reference dataset. The reference dataset is effectively downsampled to <code>mass_cap</code> observations for this specific calculation, which speeds up multiple correction iterations at the cost of some precision. If -1, no cap is used. </p>

</div>
</div>
<a id="a4285057efa41bf177dc941e9bdba2cef" name="a4285057efa41bf177dc941e9bdba2cef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4285057efa41bf177dc941e9bdba2cef">&#9670;&#160;</a></span>num_mads</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Dim_  = int, typename Index_  = int, typename Float_  = double&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="structmnncorrect_1_1Options.html">mnncorrect::Options</a>&lt; Dim_, Index_, Float_ &gt;::num_mads = 3</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Number of median absolute deviations to use to define the distance threshold for the center of mass calculations. Larger values reduce biases from the kissing effect but increase the risk of including inappropriately distant subpopulations into the center of mass. </p>

</div>
</div>
<a id="a77a06b63da4627528962cdb62f90ca28" name="a77a06b63da4627528962cdb62f90ca28"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a77a06b63da4627528962cdb62f90ca28">&#9670;&#160;</a></span>num_neighbors</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Dim_  = int, typename Index_  = int, typename Float_  = double&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="structmnncorrect_1_1Options.html">mnncorrect::Options</a>&lt; Dim_, Index_, Float_ &gt;::num_neighbors = 15</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Number of neighbors used in various search steps, primarily to identify MNN pairs. Larger values increase the number of MNN pairs and improve the stability of the correction, at the cost of reduced resolution of matching subpopulations across batches.</p>
<p>The number of neighbors is also used to identify the closest MNN pairs when computing the average correction vector for each target observation. Again, this improves stability at the cost of resolution for local variations in the correction vectors. </p>

</div>
</div>
<a id="a25c060852ae2b7402ba5b5d7e46338ba" name="a25c060852ae2b7402ba5b5d7e46338ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a25c060852ae2b7402ba5b5d7e46338ba">&#9670;&#160;</a></span>num_threads</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Dim_  = int, typename Index_  = int, typename Float_  = double&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="structmnncorrect_1_1Options.html">mnncorrect::Options</a>&lt; Dim_, Index_, Float_ &gt;::num_threads = 1</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Number of threads to use. The parallelization scheme is defined by <code><a class="el" href="namespacemnncorrect.html#a1b556e96c8995a0dba23e412b75c838a">parallelize()</a></code>. </p>

</div>
</div>
<a id="a2f2a7eb9a24cb5b0df223414b7ec7146" name="a2f2a7eb9a24cb5b0df223414b7ec7146"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f2a7eb9a24cb5b0df223414b7ec7146">&#9670;&#160;</a></span>order</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Dim_  = int, typename Index_  = int, typename Float_  = double&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;size_t&gt; <a class="el" href="structmnncorrect_1_1Options.html">mnncorrect::Options</a>&lt; Dim_, Index_, Float_ &gt;::order</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Manually specified merge order for the batches. This should contain a permutation of all integers in \({0, 1, 2, ..., N-1}\) where \(N\) is the number of batches. Each entry of this vector corresponds to a batch.</p>
<p>At the first merge step, the <code>order[0]</code> batch is considered to be the reference. <code>order[1]</code> is corrected against the reference and merged to form a new reference. This is repeated for each remaining batch in the order specified by <code>order</code>.</p>
<p>If this is empty and <code><a class="el" href="structmnncorrect_1_1Options.html#adb9f44245d56eb231b87f76412505dbf">Options::automatic_order</a> = false</code>, batches are merged in the order that they were supplied in <code><a class="el" href="namespacemnncorrect.html#af638206e33439818ce2f04633fcd9bb5">compute()</a></code>. If a <code>batch</code> array was supplied, the batches are merged in order of their identifiers, i.e., batch 0 is the reference. </p>

</div>
</div>
<a id="a6bdc7f31d9b5a2a9aad0862677b5c829" name="a6bdc7f31d9b5a2a9aad0862677b5c829"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6bdc7f31d9b5a2a9aad0862677b5c829">&#9670;&#160;</a></span>reference_policy</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Dim_  = int, typename Index_  = int, typename Float_  = double&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemnncorrect.html#a628f306b43e4b2a96382aa7025940694">ReferencePolicy</a> <a class="el" href="structmnncorrect_1_1Options.html">mnncorrect::Options</a>&lt; Dim_, Index_, Float_ &gt;::reference_policy = ReferencePolicy::MAX_RSS</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Policy to use to choose the reference batch when <code><a class="el" href="structmnncorrect_1_1Options.html#adb9f44245d56eb231b87f76412505dbf">Options::automatic_order</a> = true</code>. </p>

</div>
</div>
<a id="af6230f843c36e15e45007376508ef12f" name="af6230f843c36e15e45007376508ef12f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6230f843c36e15e45007376508ef12f">&#9670;&#160;</a></span>robust_iterations</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Dim_  = int, typename Index_  = int, typename Float_  = double&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="structmnncorrect_1_1Options.html">mnncorrect::Options</a>&lt; Dim_, Index_, Float_ &gt;::robust_iterations = 2</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Number of iterations to use for robustification when computing the center of mass for each MNN-involved cell. At each iteration, the observations furthest from the center are removed, and the center is recomputed with the remaining observations. </p>

</div>
</div>
<a id="a33d8e8a5102579ce703156509f09b72c" name="a33d8e8a5102579ce703156509f09b72c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a33d8e8a5102579ce703156509f09b72c">&#9670;&#160;</a></span>robust_trim</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Dim_  = int, typename Index_  = int, typename Float_  = double&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="structmnncorrect_1_1Options.html">mnncorrect::Options</a>&lt; Dim_, Index_, Float_ &gt;::robust_trim = 0.25</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Trimming proportion to use for robustification when computing the center of mass. The proportion of observations with the largest distances from the center are removed for the next iteration of the center calculation. </p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li>mnncorrect/<a class="el" href="Options_8hpp_source.html">Options.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
